## This file is managed by puppet.

## socks
SocksPort <%= socks_port %>
<%- for address in socks_listen_addresses -%>
SocksListenAddress <%= address %>
<%- end -%>
<%- for policy in socks_policies -%>
SocksPolicy <%= policy %>
<%- end -%>

## log
<%- if log_rules != [] then -%>
<%-   for log_rule in log_rules -%>
Log <%= log_rule %>
<%-   end -%>
<%- else -%>
Log notice syslog
<%- end -%>

## runtime
RunAsDaemon 1
DataDirectory <%= data_directory %>

## tor controller
<%- if control_port != 0 then -%>
ControlPort <%= control_port %>
HashedControlPassword <%= hashed_control_password %>
<%- end -%>

## hidden services
<%- for service in hidden_services -%>
HiddenServiceDir /var/tor/<%= service[:name] %>/<%= service[:dir] %>
<%-   for port in service[:ports] -%>
HiddenServicePort <%= port %>
<%-   end -%>
<%-  end -%>

## relay
<%- if or_port != 0 then -%>
ORPort <%= or_port %>
<%- end -%>
<%- if or_listen_address != '' then -%>
ORListenAddress <%= or_listen_address %>
<%- end -%>
<%- if nickname != '' then -%>
Nickname <%= nickname %>
<%- end -%>
<%- if address != '' then -%>
Address <%= address %>
<%- end -%>
<%- if relay_bandwidth_rate != '0' then -%>
RelayBandwidthRate <%= relay_bandwidth_rate %> KB
<%- end -%>
<%- if relay_bandwidth_burst != '0' then -%>
RelayBandwidthBurst <%= relay_bandwidth_burst %> KB
<%- end -%>
<%- if accounting_max != '0' then -%>
AccountingMax <%= accounting_max %> GB
<%- end -%>
<%- for accounting in accounting_start -%>
AccountingStart <%= accounting_start %>
<%- end -%>
<%- if contact_info != '' then -%>
ContactInfo <%= contact_info %>
<%- end -%>

## directory listing
<%- if dir_port != '0' then -%>
DirPort <%= dir_port %>
<%- end -%>
<%- if dir_listen_address != '' then -%>
DirListenAddress <%= dir_listen_address %>
<%- end -%>
<%- if dir_port_front_page != '' then -%>
DirPortFrontPage <%= dir_port_front_page %>
<%- end -%>

## relay family
<%- if my_family != '' then -%>
MyFamily <%= my_family %>
<%- end -%>

## bridge relay
<%- if bridge_relay != '0' then -%>
BridgeRelay <%= bridge_relay %>
<%- end -%>

## exit policies
<%- for policy in exit_policies -%>
ExitPolicy <%= policy %>
<%- end -%>
